<template>
  <div class="fr-container--md fr-py-6w fr-pb-8w">
    <header class="hero-section fr-mb-6w fr-p-4w">
      <h1 class="fr-h1 fr-mb-3w">Contactez-nous</h1>
      <p class="fr-text fr-text--lead">
        Contactez-nous et posez vos questions sur Protectâ€™Envi et les procÃ©dures dÃ©pÃ´ts sauvages
      </p>
    </header>

    <div class="fr-grid-row fr-grid-row--gutters">
      <div class="fr-col-12 fr-col-md-6">
        <DsfrCard
          title="Besoin d'une rÃ©ponse rapide ?"
          description="Ã‰changez avec nos Ã©quipes par chat ou envoyez-nous un e-mail pour obtenir des rÃ©ponses rapides Ã  vos questions."
          :buttons="[
            {
              label: 'Ouvrir le chat',
              icon: chatIcon,
              onClick: openCrispChat,
            },
            {
              label: 'Envoyer un e-mail',
              icon: emailIcon,
              onClick: sendEmail,
              disabled: !contactEmail,
              secondary: true,
            },
          ]"
          size="large"
          no-arrow
          title-tag="h4"
        />
      </div>

      <div class="fr-col-12 fr-col-md-6">
        <DsfrCard
          title="Besoin d'un accompagnement ?"
          description="Participez Ã  un webinaire collectif ou rÃ©servez une session d'accompagnement individuelle pour votre cas concret."
          :buttons="[
            {
              label: 'Prendre rendez-vous',
              icon: externalLinkIcon,
              onClick: openRdvPage,
              secondary: true,
            },
          ]"
          size="large"
          no-arrow
          title-tag="h4"
        />
      </div>
    </div>

    <section class="fr-mt-6w fr-p-4w fr-bg--g100">
      <h2 class="fr-h3">Ressources utiles</h2>
      <p class="fr-mt-3w">
        <span aria-hidden="true">ðŸ‘‰</span> Pour un accompagnement pas Ã  pas, consultez le
        <a
          href="https://acdechets.smartidf.services/aide-verbalisation"
          class="fr-link fr-icon-external-link-line fr-link--icon-right"
          target="_blank"
          rel="nopener"
        >
          guide ACDÃ©chets de la RÃ©gion ÃŽle-de-France
        </a>
      </p>
      <p>
        <span aria-hidden="true">ðŸ‘‰</span> Retrouvez des conseils pratiques sur l'application Ã 
        destination des Ã©lus, Gend'Ã©lus, accessible Ã  tout le monde :
      </p>
      <ul>
        <li>
          <a
            href="https://play.google.com/store/apps/details?id=com.gendelus&hl=fr&pli=1"
            class="fr-link fr-icon-external-link-line fr-link--icon-right"
            target="_blank"
            rel="noreferrer noopener"
          >
            TÃ©lÃ©charger sur le Play Store
          </a>
        </li>
        <li>
          <a
            href="https://apps.apple.com/fr/app/gend%C3%A9lus/id6444316373"
            class="fr-link fr-icon-external-link-line fr-link--icon-right"
            target="_blank"
            rel="noreferrer noopener"
          >
            TÃ©lÃ©charger sur l'App Store
          </a>
        </li>
      </ul>
    </section>
  </div>
</template>

<script setup lang="ts">
import { DsfrCard } from '@gouvminint/vue-dsfr'

const contactEmail = import.meta.env.VITE_CONTACT_EMAIL
const rdvPageUrl = import.meta.env.VITE_RDV_PAGE_URL || 'https://rdv.anct.gouv.fr/prendre_rdv'

const chatIcon = { name: 'ri-chat-1-line', scale: 1.5, class: 'fr-mr-1w' }
const emailIcon = { name: 'ri-mail-line', scale: 1.5, class: 'fr-mr-1w' }
const externalLinkIcon = { name: 'ri-external-link-line', scale: 1.5, class: 'fr-mr-1w' }

const sendEmail = () => {
  window.location.href = `mailto:${contactEmail}`
}

const openRdvPage = () => {
  window.open(rdvPageUrl, '_blank', 'noopener,noreferrer')
}

const openCrispChat = () => {
  const crisp = (window as any).$crisp
  if (crisp) {
    crisp.push(['do', 'chat:open'])
  }
}
</script>

<style scoped>
.hero-section {
  background-color: #f5f5fe;
}
</style>
